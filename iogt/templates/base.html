{% load static wagtailuserbar home_tags sass_tags wagtailsettings_tags menu_tags i18n%}
{% get_settings %}

<!--  Commit Hash: {{commit_hash}} -->
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ settings.home.SiteSettings.local_ga_tracking_code }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ settings.home.SiteSettings.local_ga_tag_manager }}');
        gtag('config', '{{ settings.home.SiteSettings.global_ga_tag_manager }}');
        gtag('config', '{{ settings.home.SiteSettings.local_ga_tracking_code }}');
        gtag('config', '{{ settings.home.SiteSettings.global_ga_tracking_code }}');
    </script>
    <meta charset="utf-8"/>
    <title>
        {% block title %}
            {% if self.seo_title %}{{ self.seo_title }}{% else %}
                {{ self.title }}{% endif %}
        {% endblock %}
        {% block title_suffix %}
            {% with self.get_site.site_name as site_name %}
                {% if site_name %}- {{ site_name }}{% endif %}
            {% endwith %}
        {% endblock %}
    </title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#493174">
    <link rel="manifest" href="{% url 'manifest' %}">
    <link rel="apple-touch-icon" href="{% static 'icons/unicef-logo.png' %}">

        {# Global stylesheets #}
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" type="text/css" href="{% static 'css/iogt.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/chatbot.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/header/header.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/footer/footer.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/navbar/navbar.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/global/global.css' %}">

    {% block extra_css %}
        {# Override this in templates to add extra stylesheets #}
    {% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}">
{% wagtailuserbar %}

<main id="app">
    <div id="content-wrap">
         {% if settings.home.CacheSettings.cache and first_time_user %}
            {% include "cache_banner.html" %}
        {% endif %}
        {% include "header.html" %}
        <div class="content-holder">
            <div class="other-links">
                {% footer %}
            </div>
            <div class="content">
                {% include "messages.html" %} 
                {% block content %}{% endblock %}
                <p class='footer__copyright'>{% translate "Â© The Internet of Good Things"%}</p>
            </div>
            {% include "footer.html" %}
        </div>
    </div>
</main>

{# Global javascript #}
<script src="{% url 'javascript-catalog' %}"></script>
<script src="{% static 'js/sw-init.js' %}"></script>
<noscript>
    <style type="text/css">
        #hideOnNonJSDevice, .hideOnNonJSDevice {
            display: none;
        }

        .showOnNonJSDevice {
            display: block !important;
        }
        </script> 
        <noscript>
            <style type="text/css">
                .cache-banner { display:none; }
            </style>
        </noscript>
        {% block extra_js %}{% endblock %}
    </body>
</html>
